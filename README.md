# Плагин сохранения сцен Blender

Комплексное решение для автоматического сохранения сцен Blender и их отслеживания через Django backend. Проект состоит из двух основных компонентов: плагина для Blender и серверного приложения на Django.

## Структура проекта

```
project/
├── backend/
│   ├── config/
│   │   ├── settings.py
│   │   ├── urls.py
│   │   ├── wsgi.py
│   │   └── asgi.py
│   ├── saves/
│   │   ├── models.py
│   │   ├── views.py
│   │   ├── urls.py
│   │   └── admin.py
│   ├── manage.py
│   └── requirements.txt
├── blender_plugin/
│   └── __init__.py
├── docker-compose.yml
└── Dockerfile
```

## Возможности

- Автоматическое сохранение сцен в Blender
- Создание временных файлов для несохраненных сцен
- Backend API для отслеживания операций сохранения
- Поддержка Docker для простого развертывания
- Административный интерфейс для просмотра истории сохранений
- REST API эндпоинты для операций сохранения сцен

## Требования

- Python 3.11 или выше
- Blender 4.0 или выше
- Docker и Docker Compose (для развертывания в контейнерах)
- Библиотека Requests для Python

## Установка

### Настройка Backend

1. **Использование Docker (Рекомендуется)**:
   ```bash
   # Клонируйте репозиторий
   git clone <url-репозитория>
   cd <директория-проекта>

   # Запустите контейнеры Docker
   docker-compose up --build
   ```

2. **Ручная установка**:
   ```bash
   # Перейдите в директорию backend
   cd backend

   # Создайте виртуальное окружение
   python -m venv venv
   source venv/bin/activate  # На Windows: venv\Scripts\activate

   # Установите зависимости
   pip install -r requirements.txt

   # Выполните миграции
   python manage.py migrate

   # Создайте суперпользователя (для доступа к админке)
   python manage.py createsuperuser

   # Запустите сервер разработки
   python manage.py runserver
   ```

### Установка плагина Blender

1. Откройте Blender
2. Перейдите в Edit > Preferences > Add-ons
3. Нажмите "Install" и выберите файл `__init__.py`
4. Активируйте плагин, установив галочку напротив "Scene Save Plugin Hellcake"

## Использование

### Плагин Blender

1. Плагин добавляет новую панель в боковую панель 3D Viewport (нажмите N для переключения)
2. Найдите вкладку "Scene Save"
3. Нажмите "Save Scene" для сохранения работы и отправки данных на сервер

### Backend API

Backend предоставляет следующий эндпоинт:

- `POST /api/save/`
  ```json
  {
    "username": "имя_пользователя",
    "file_path": "/путь/к/файлу/blend"
  }
  ```

### Административный интерфейс

Доступ к административному интерфейсу осуществляется по адресу `http://localhost:8000/admin`, где можно просматривать историю сохранений и управлять записями.

## Конфигурация

### Настройки Backend

Ключевые настройки в `settings.py`:
- `DEBUG`: Установите `False` в продакшене
- `SECRET_KEY`: Измените в продакшене
- `ALLOWED_HOSTS`: Настройте для продакшена
- `DATABASES`: Настройте параметры базы данных по необходимости

### Настройки плагина

Плагин по умолчанию настроен на подключение к `http://localhost:8000`. Измените URL в `__init__.py`, если ваш сервер размещен в другом месте.

## Разработка

### Запуск тестов

```bash
# Скрипт тестирования API
python test_api.py
```

### Разработка с Docker

```bash
# Сборка и запуск контейнеров
docker-compose up --build

# Выполнение команд в контейнере
docker-compose exec backend python manage.py migrate
```

## Замечания по безопасности

- Измените секретный ключ Django перед развертыванием
- Настройте разрешенные хосты соответствующим образом
- Используйте переменные окружения для чувствительных данных
- Реализуйте proper-аутентификацию для API в продакшене

## Устранение неисправностей

Распространенные проблемы и их решения:

1. **Ошибка подключения к серверу**
   - Проверьте, запущен ли сервер
   - Проверьте URL сервера в плагине
   - Убедитесь, что настройки брандмауэра разрешают подключение

2. **Плагин не сохраняет**
   - Проверьте права на запись в директорию сохранения
   - Убедитесь, что Blender имеет необходимый доступ к файлам

3. **Проблемы с Docker**
   - Убедитесь, что порты не заняты
   - Проверьте логи Docker для подробной информации об ошибках

## Участие в разработке

1. Создайте форк репозитория
2. Создайте ветку для новой функциональности
3. Отправьте pull request

## Лицензия

Этот проект лицензирован по лицензии AGPL3 - подробности см. в файле LICENSE.

## Авторы

- Hellcake - Начальная работа и поддержка

